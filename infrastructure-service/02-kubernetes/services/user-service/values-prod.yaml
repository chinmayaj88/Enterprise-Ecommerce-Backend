# Production environment values for user-service

name: user-service
namespace: ecommerce-production

image:
  # Tag is overridden by CD workflow via --set image.tag
  tag: ""

replicaCount: 3

oci:
  compartmentId: "ecommerce-production"
  dynamicGroup: "ecommerce-user-service-production"

resources:
  requests:
    cpu: "200m"
    memory: "512Mi"
  limits:
    cpu: "2000m"
    memory: "2Gi"

autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 20
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

podDisruptionBudget:
  enabled: true
  minAvailable: 2

priorityClassName: critical-priority

labels:
  environment: production

env:
  NODE_ENV: production

ingress:
  enabled: true
  hosts:
    - host: user.yourdomain.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: user-tls-secret
      hosts:
        - user.yourdomain.com

monitoring:
  enabled: true

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app
                operator: In
                values:
                  - user
          topologyKey: kubernetes.io/hostname

