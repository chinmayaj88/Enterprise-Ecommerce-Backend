# Production environment values for gateway-service

name: gateway-service
namespace: ecommerce-production

image:
  # Tag is overridden by CD workflow via --set image.tag
  tag: ""

replicaCount: 3

oci:
  compartmentId: "ecommerce-production"
  dynamicGroup: "ecommerce-gateway-service-production"

resources:
  requests:
    cpu: "200m"
    memory: "512Mi"
  limits:
    cpu: "2000m"
    memory: "2Gi"

autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 20
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

podDisruptionBudget:
  enabled: true
  minAvailable: 2

priorityClassName: critical-priority

labels:
  environment: production

env:
  NODE_ENV: production

ingress:
  enabled: true
  hosts:
    - host: api.yourdomain.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: gateway-tls-secret
      hosts:
        - api.yourdomain.com

monitoring:
  enabled: true

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app
                operator: In
                values:
                  - gateway
          topologyKey: kubernetes.io/hostname

